# 配置一些属性的默认值，如果不改动代码只是运行的话不需要修改此文件。
# 运行所需的环境配置在根目录的 application-EXAMPLE.yml 里

server:

  connection-timeout: 10s

  http2:
    enabled: true

  compression:
    enabled: true

  tomcat:
    max-threads: 2

spring:

  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration
      - org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration
      - org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration
      - org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration
      - org.springframework.boot.autoconfigure.task.TaskSchedulingAutoConfiguration
      - org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration
      - org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration

      # 暂时用不到 Multipart 和 WebSocket
      - org.springframework.boot.autoconfigure.websocket.servlet.WebSocketServletAutoConfiguration
      - org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration

  main:
    banner-mode: "off"

  mvc:
    favicon:
      enabled: false

    # 全站AJAX，不存在表单提交PUT、DELETE等问题
    hiddenmethod:
      filter:
        enabled: false

  jmx:
    enabled: false

  data:
    web:
      pageable:
        page-parameter: start
        size-parameter: count

  session:
    store-type: redis
    timeout: 30d
    redis:
      namespace: kx

  jackson:
    serialization:
      write-date-timestamps-as-nanoseconds: false
      write-dates-as-timestamps: true
    deserialization:
      read-date-timestamps-as-nanoseconds: false

  datasource:
    initialization-mode: always

mybatis:

  mapper-locations: classpath:mybatis/*

  configuration:
    default-enum-type-handler: org.apache.ibatis.type.EnumOrdinalTypeHandler
    cache-enabled: false

kaciras:

  authorization:
    security-context: true

  cors:
    allowed-methods: "*"
    allowed-headers: [X-CSRF-Token, X-Requested-With, Content-Type]
    exposed-headers: [Location, X-RateLimit-Wait]
